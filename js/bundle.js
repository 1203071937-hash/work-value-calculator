(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var o=function(e){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(o)?o:o+""}var n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cityFactors={åŒ—äº¬:1,ä¸Šæµ·:1,æ·±åœ³:.9,å¹¿å·:.9,æ­å·:.8,æˆéƒ½:.7,æ­¦æ±‰:.7,è¥¿å®‰:.6,å…¶ä»–:.5},this.educationFactors={ä¸“ç§‘:1,æœ¬ç§‘:1.1,ç¡•å£«:1.2,åšå£«:1.3},this.schoolRankFactors={æ™®é€šé™¢æ ¡:1,"211é™¢æ ¡":1.1,"985é™¢æ ¡":1.2,é¡¶å°–é™¢æ ¡:1.3}},(o=[{key:"calculateIncomeIndex",value:function(t){t.salary;var e=t.afterTax,o=t.allowance,n=t.insuranceBase,r=t.fundRate,a=t.otherBenefits,i=t.city,u=t.education,l=t.schoolRank,c=this.cityFactors[i]||1,s=this.educationFactors[u]||1,d=this.schoolRankFactors[l]||1,m=this.calculateSocialInsurance(n),f=this.calculateHousingFund(n,r),v=e+f+a,y=v/5e3*100;return y=y*c*s*d,{incomeIndex:Math.round(100*y)/100,totalIncome:Math.round(100*v)/100,socialInsurance:Math.round(100*m)/100,housingFund:Math.round(100*f)/100,cityFactor:c,educationFactor:s,schoolRankFactor:d,breakdown:{afterTax:e,housingFund:f,otherBenefits:a,allowance:o}}}},{key:"calculateSocialInsurance",value:function(t){return.36*t}},{key:"calculateHousingFund",value:function(t,e){return t*e*.02}},{key:"getWeight",value:function(){return.35}}])&&e(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}var u=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.standardWorkHours=8,this.standardCommuteHours=1,this.standardWorkIntensity=3,this.standardWorkDays=5},(e=[{key:"calculateWorkIndex",value:function(t){var e=t.workStart,o=t.workEnd,n=t.commuteTime,r=t.overtimeFreq,a=t.overtimeHours,i=t.workIntensity,u=t.workDays,l=t.age,c=o-e,s=2*n/60,d=this.calculateTimeCostIndex(c,s),m=this.calculateIntensityCostIndex(i),f=this.calculateOvertimeCostIndex(r,a),v=u/this.standardWorkDays,y=this.calculateAgeFactor(l),h=(d+m+f)*y*v/10;return{workIndex:Math.max(1,Math.round(100*h)/100),timeCostIndex:Math.round(100*d)/100,intensityCostIndex:Math.round(100*m)/100,overtimeCostIndex:Math.round(100*f)/100,workDaysFactor:Math.round(100*v)/100,ageFactor:Math.round(100*y)/100,breakdown:{workHours:c,commuteHours:s,workDays:u,age:l}}}},{key:"calculateTimeCostIndex",value:function(t,e){return(t+e)/(this.standardWorkHours+this.standardCommuteHours)*30}},{key:"calculateIntensityCostIndex",value:function(t){return t/this.standardWorkIntensity*20}},{key:"calculateOvertimeCostIndex",value:function(t,e){var o=t+e;return o/Math.max(.1,o)*10}},{key:"calculateAgeFactor",value:function(t){return 1+.02*(t-25)}},{key:"getWeight",value:function(){return.25}}])&&a(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var d=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.standardRent=2e3,this.standardFood=1500,this.standardTransport=500},(e=[{key:"calculateCostIndex",value:function(t){var e=t.rent,o=t.food,n=t.transport,r=t.city,a=e+o+n,i=a/4e3*100,u=this.getCityCostFactor(r);return i*=u,{costIndex:Math.round(100*i)/100,totalCost:Math.round(100*a)/100,cityCostFactor:u,breakdown:{rent:Math.round(100*e)/100,food:Math.round(100*o)/100,transport:Math.round(100*n)/100},costRatio:{rentRatio:Math.round(e/a*100),foodRatio:Math.round(o/a*100),transportRatio:Math.round(n/a*100)}}}},{key:"getCityCostFactor",value:function(t){return{åŒ—äº¬:1.2,ä¸Šæµ·:1.2,æ·±åœ³:1.1,å¹¿å·:1,æ­å·:.9,æˆéƒ½:.8,æ­¦æ±‰:.8,è¥¿å®‰:.7,å…¶ä»–:.6}[t]||1}},{key:"calculateCostBenefitRatio",value:function(t,e){return 0===e?0:Math.round(t/e*100)/100}},{key:"getWeight",value:function(){return.2}}])&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function f(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}var y=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.experienceWeights={housingSatisfaction:.25,consumptionSatisfaction:.2,transportSatisfaction:.15,lifeAtmosphere:.2,workAtmosphere:.2}},(e=[{key:"calculateExperienceIndex",value:function(t){var e=this,o=(t.housingSatisfaction,t.consumptionSatisfaction,t.transportSatisfaction,t.lifeAtmosphere,t.workAtmosphere,this.validateExperienceData(t)),n=0;return Object.keys(this.experienceWeights).forEach(function(t){n+=o[t]*e.experienceWeights[t]}),n*=10,{experienceIndex:Math.round(100*n)/100,weightedScores:{housingSatisfaction:Math.round(10*o.housingSatisfaction*100)/100,consumptionSatisfaction:Math.round(10*o.consumptionSatisfaction*100)/100,transportSatisfaction:Math.round(10*o.transportSatisfaction*100)/100,lifeAtmosphere:Math.round(10*o.lifeAtmosphere*100)/100,workAtmosphere:Math.round(10*o.workAtmosphere*100)/100},weights:this.experienceWeights,breakdown:o}}},{key:"validateExperienceData",value:function(t){var e={};return Object.keys(t).forEach(function(o){var n=parseFloat(t[o])||5;n=Math.max(1,Math.min(10,n)),e[o]=n}),e}},{key:"getExperienceEvaluation",value:function(t){return t>=90?"æä½³ä½“éªŒï¼Œå·¥ä½œç”Ÿæ´»å¹³è¡¡å®Œç¾ï¼":t>=80?"ä¼˜ç§€ä½“éªŒï¼Œæ•´ä½“æ»¡æ„åº¦å¾ˆé«˜ï¼":t>=70?"è‰¯å¥½ä½“éªŒï¼Œå¤§éƒ¨åˆ†æ–¹é¢ä»¤äººæ»¡æ„ï¼":t>=60?"ä¸€èˆ¬ä½“éªŒï¼Œæœ‰æå‡ç©ºé—´ï¼":t>=50?"è¾ƒå·®ä½“éªŒï¼Œéœ€è¦æ”¹å–„ï¼":"å¾ˆå·®ä½“éªŒï¼Œå»ºè®®é‡æ–°è€ƒè™‘ï¼"}},{key:"getWeight",value:function(){return.2}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}var b=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.incomeCalculator=new n,this.workCalculator=new u,this.costCalculator=new d,this.experienceCalculator=new y,this.init()},(e=[{key:"init",value:function(){this.bindEvents(),this.showCalculationLogic()}},{key:"bindEvents",value:function(){var t=this,e=document.getElementById("calculateBtn");e&&e.addEventListener("click",function(){return t.calculateValue()});var o=document.getElementById("resetBtn");o&&o.addEventListener("click",function(){return t.resetForm()});var n=document.getElementById("showLogicBtn");n&&n.addEventListener("click",function(){return t.showCalculationLogic()})}},{key:"calculateValue",value:function(){try{var t=this.collectFormData();if(!this.validateFormData(t))return;var e=this.incomeCalculator.calculateIncomeIndex(t),o=this.workCalculator.calculateWorkIndex(t),n=this.costCalculator.calculateCostIndex(t),r=this.experienceCalculator.calculateExperienceIndex(t),a=this.calculateTotalScore(e,o,n,r),i=this.getEvaluation(a);this.displayResult({totalScore:a,evaluation:i,incomeResult:e,workResult:o,costResult:n,experienceResult:r,formData:t})}catch(t){console.error("è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:",t),alert("è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ•°æ®ï¼")}}},{key:"collectFormData",value:function(){var t,e,o,n,r,a,i,u,l,c,s,d,m,f,v,y,h,p,g,b,k,w,I,S,E,F,x={};return x.name=(null===(t=document.getElementById("name"))||void 0===t?void 0:t.value)||"åŒ¿åç”¨æˆ·",x.city=(null===(e=document.getElementById("city"))||void 0===e?void 0:e.value)||"å…¶ä»–",x.age=parseFloat(null===(o=document.getElementById("age"))||void 0===o?void 0:o.value)||25,x.education=(null===(n=document.getElementById("education"))||void 0===n?void 0:n.value)||"æœ¬ç§‘",x.schoolRank=(null===(r=document.getElementById("schoolRank"))||void 0===r?void 0:r.value)||"æ™®é€šé™¢æ ¡",x.salary=parseFloat(null===(a=document.getElementById("salary"))||void 0===a?void 0:a.value)||0,x.afterTax=parseFloat(null===(i=document.getElementById("afterTax"))||void 0===i?void 0:i.value)||0,x.allowance=parseFloat(null===(u=document.getElementById("allowance"))||void 0===u?void 0:u.value)||0,x.insuranceBase=parseFloat(null===(l=document.getElementById("insuranceBase"))||void 0===l?void 0:l.value)||0,x.fundRate=parseFloat(null===(c=document.getElementById("fundRate"))||void 0===c?void 0:c.value)||.12,x.otherBenefits=parseFloat(null===(s=document.getElementById("otherBenefits"))||void 0===s?void 0:s.value)||0,x.workStart=parseFloat(null===(d=document.getElementById("workStart"))||void 0===d?void 0:d.value)||9,x.workEnd=parseFloat(null===(m=document.getElementById("workEnd"))||void 0===m?void 0:m.value)||18,x.commuteTime=parseFloat(null===(f=document.getElementById("commuteTime"))||void 0===f?void 0:f.value)||60,x.overtimeFreq=parseFloat(null===(v=document.getElementById("overtimeFreq"))||void 0===v?void 0:v.value)||0,x.overtimeHours=parseFloat(null===(y=document.getElementById("overtimeHours"))||void 0===y?void 0:y.value)||0,x.workIntensity=parseFloat(null===(h=document.getElementById("workIntensity"))||void 0===h?void 0:h.value)||3,x.workDays=parseFloat(null===(p=document.getElementById("workDays"))||void 0===p?void 0:p.value)||5,x.rent=parseFloat(null===(g=document.getElementById("rent"))||void 0===g?void 0:g.value)||0,x.food=parseFloat(null===(b=document.getElementById("food"))||void 0===b?void 0:b.value)||0,x.transport=parseFloat(null===(k=document.getElementById("transport"))||void 0===k?void 0:k.value)||0,x.housingSatisfaction=parseFloat(null===(w=document.getElementById("housingSatisfaction"))||void 0===w?void 0:w.value)||5,x.consumptionSatisfaction=parseFloat(null===(I=document.getElementById("consumptionSatisfaction"))||void 0===I?void 0:I.value)||5,x.transportSatisfaction=parseFloat(null===(S=document.getElementById("transportSatisfaction"))||void 0===S?void 0:S.value)||5,x.lifeAtmosphere=parseFloat(null===(E=document.getElementById("lifeAtmosphere"))||void 0===E?void 0:E.value)||5,x.workAtmosphere=parseFloat(null===(F=document.getElementById("workAtmosphere"))||void 0===F?void 0:F.value)||5,x}},{key:"validateFormData",value:function(t){return!t.afterTax||t.afterTax<=0?(alert("è¯·è¾“å…¥æœ‰æ•ˆçš„ç¨åå·¥èµ„ï¼"),!1):!(t.workEnd<=t.workStart&&(alert("ä¸‹ç­æ—¶é—´å¿…é¡»æ™šäºä¸Šç­æ—¶é—´ï¼"),1))}},{key:"calculateTotalScore",value:function(t,e,o,n){var r=this.incomeCalculator.getWeight(),a=this.workCalculator.getWeight(),i=this.costCalculator.getWeight(),u=this.experienceCalculator.getWeight(),l=t.incomeIndex*r+(100-e.workIndex)*a+(100-o.costIndex)*i+n.experienceIndex*u;return Math.max(0,Math.min(100,Math.round(100*l)/100))}},{key:"getEvaluation",value:function(t){return t>=95?{grade:"å¤©èœï¼",comment:"å¤ªæ£’äº†ï¼Œä½ çš„å…¬å¸åœ¨å“ªï¼Ÿæˆ‘ä¹Ÿè¦å…¥èŒï¼",emoji:"ğŸŒŸ",recommendation:"è¿™ä»½å·¥ä½œæ€§ä»·æ¯”æé«˜ï¼Œå»ºè®®ç«‹å³æ¥å—ï¼"}:t>=85?{grade:"ä¼˜ç§€ï¼",comment:"è¿™å·¥ä½œæ€§ä»·æ¯”ç®€ç›´é€†å¤©ï¼Œèµ¶ç´§çæƒœå§ï¼",emoji:"âœ¨",recommendation:"å·¥ä½œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œå€¼å¾—é•¿æœŸå‘å±•ï¼"}:t>=75?{grade:"è‰¯å¥½ï¼",comment:"è¿™ä»½å·¥ä½œç›¸å½“ä¸é”™ï¼Œå€¼å¾—è€ƒè™‘ï¼",emoji:"ğŸ‘",recommendation:"æ€§ä»·æ¯”ä¸é”™ï¼Œå¯ä»¥è€ƒè™‘æ¥å—è¿™ä»½å·¥ä½œï¼"}:t>=65?{grade:"ä¸€èˆ¬ï¼",comment:"è¿˜å¯ä»¥æ¥å—ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ã€‚",emoji:"ğŸ˜",recommendation:"æ€§ä»·æ¯”ä¸€èˆ¬ï¼Œå»ºè®®å†çœ‹çœ‹å…¶ä»–æœºä¼šï¼"}:t>=50?{grade:"åŠæ ¼ï¼",comment:"å‹‰å¼ºå¯ä»¥æ¥å—ï¼Œä½†éœ€è¦æ…é‡è€ƒè™‘ã€‚",emoji:"ğŸ˜•",recommendation:"æ€§ä»·æ¯”åä½ï¼Œé™¤éç‰¹åˆ«éœ€è¦è¿™ä»½å·¥ä½œï¼Œå¦åˆ™å»ºè®®ç»§ç»­å¯»æ‰¾ï¼"}:{grade:"ä¸åŠæ ¼ï¼",comment:"è¿™ä»½å·¥ä½œæ€§ä»·æ¯”å¤ªä½ï¼Œä¸å»ºè®®æ¥å—è¿™ä»½å·¥ä½œï¼Œç»§ç»­å¯»æ‰¾æ›´å¥½çš„æœºä¼šå§ï¼",emoji:"âŒ",recommendation:"æ€§ä»·æ¯”å¤ªä½ï¼Œä¸å»ºè®®æ¥å—è¿™ä»½å·¥ä½œï¼Œç»§ç»­å¯»æ‰¾æ›´å¥½çš„æœºä¼šå§ï¼"}}},{key:"displayResult",value:function(t){this.updateResultPage(t),this.showResultModal(t)}},{key:"updateResultPage",value:function(t){console.log("è®¡ç®—ç»“æœ:",t)}},{key:"showResultModal",value:function(t){console.log("æ˜¾ç¤ºç»“æœå¼¹çª—:",t)}},{key:"resetForm",value:function(){var t=document.getElementById("calculatorForm");t&&t.reset(),t.querySelectorAll("input, select").forEach(function(t){"number"===t.type?t.value=t.defaultValue||"":"select-one"===t.type&&(t.selectedIndex=0)})}},{key:"showCalculationLogic",value:function(){window.location.href="calculation-logic.html"}}])&&p(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();document.addEventListener("DOMContentLoaded",function(){new b})})();