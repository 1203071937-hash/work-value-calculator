(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var o=function(t){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cityData={华北地区:{北京:{factor:.7,level:"超一线城市"},天津:{factor:.8,level:"一线城市"},石家庄:{factor:1,level:"二线城市"},太原:{factor:1,level:"二线城市"},呼和浩特:{factor:1.1,level:"二线城市"}},华东地区:{上海:{factor:.7,level:"超一线城市"},南京:{factor:.9,level:"新一线城市"},杭州:{factor:.9,level:"新一线城市"},宁波:{factor:1,level:"二线城市"},苏州:{factor:.95,level:"新一线城市"},无锡:{factor:1,level:"二线城市"},常州:{factor:1.05,level:"二线城市"},南通:{factor:1.05,level:"二线城市"},扬州:{factor:1.05,level:"二线城市"},徐州:{factor:1.05,level:"二线城市"},合肥:{factor:1,level:"二线城市"},福州:{factor:1,level:"二线城市"},厦门:{factor:.95,level:"新一线城市"},泉州:{factor:1.05,level:"二线城市"},青岛:{factor:.95,level:"新一线城市"},济南:{factor:1,level:"二线城市"},烟台:{factor:1.05,level:"二线城市"},潍坊:{factor:1.05,level:"二线城市"}},华南地区:{广州:{factor:.85,level:"一线城市"},深圳:{factor:.8,level:"一线城市"},珠海:{factor:1,level:"二线城市"},佛山:{factor:1,level:"二线城市"},东莞:{factor:1,level:"二线城市"},中山:{factor:1.05,level:"二线城市"},惠州:{factor:1.05,level:"二线城市"},南宁:{factor:1,level:"二线城市"},海口:{factor:1,level:"二线城市"}},华中地区:{武汉:{factor:1,level:"新一线城市"},长沙:{factor:1,level:"新一线城市"},郑州:{factor:1,level:"新一线城市"},南昌:{factor:1,level:"二线城市"},洛阳:{factor:1.05,level:"二线城市"},襄阳:{factor:1.05,level:"二线城市"},宜昌:{factor:1.05,level:"二线城市"}},西南地区:{成都:{factor:1,level:"新一线城市"},重庆:{factor:1,level:"新一线城市"},昆明:{factor:1,level:"二线城市"},贵阳:{factor:1,level:"二线城市"},拉萨:{factor:1.1,level:"三线城市"}},西北地区:{西安:{factor:1.1,level:"二线城市"},兰州:{factor:1.1,level:"二线城市"},西宁:{factor:1.1,level:"三线城市"},银川:{factor:1.1,level:"三线城市"},乌鲁木齐:{factor:1.1,level:"二线城市"}},东北地区:{沈阳:{factor:1,level:"二线城市"},大连:{factor:1,level:"二线城市"},长春:{factor:1,level:"二线城市"},哈尔滨:{factor:1,level:"二线城市"}}},this.cityFactors=this.buildCityFactors(),this.educationFactors={专科:1.2,本科:1,硕士:.8,博士:.6},this.schoolRankFactors={普通院校:1.1,"211院校":1,"985院校":.9,顶尖院校:.8}},(n=[{key:"buildCityFactors",value:function(){var e={};return Object.values(this.cityData).forEach(function(o){Object.entries(o).forEach(function(o){var n=function(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,u=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(u)throw r}}return l}}(e,o)||function(e,o){if(e){if("string"==typeof e)return t(e,o);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,o):void 0}}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o,2),r=n[0],a=n[1];e[r]=a.factor})}),e["其他"]=1.2,e}},{key:"getRegions",value:function(){return Object.keys(this.cityData)}},{key:"getCitiesByRegion",value:function(e){return this.cityData[e]?Object.keys(this.cityData[e]):[]}},{key:"getCityInfo",value:function(e){for(var t=0,o=Object.values(this.cityData);t<o.length;t++){var n=o[t];if(n[e])return n[e]}return{factor:1,level:"其他城市"}}},{key:"calculateIncomeIndex",value:function(e){e.salary;var t=e.afterTax,o=e.allowance,n=e.insuranceBase,r=e.fundRate,a=e.otherBenefits,i=e.city,l=e.education,c=e.schoolRank,u=this.cityFactors[i]||1,s=this.educationFactors[l]||1,f=this.schoolRankFactors[c]||1,v=this.calculateSocialInsurance(n),d=this.calculateHousingFund(n,r),m=t+d+a,y=m/5e3*100;return y=y*u*s*f,{incomeIndex:Math.round(100*y)/100,totalIncome:Math.round(100*m)/100,socialInsurance:Math.round(100*v)/100,housingFund:Math.round(100*d)/100,cityFactor:u,educationFactor:s,schoolRankFactor:f,cityInfo:this.getCityInfo(i),breakdown:{afterTax:t,housingFund:d,otherBenefits:a,allowance:o}}}},{key:"calculateSocialInsurance",value:function(e){return.36*e}},{key:"calculateHousingFund",value:function(e,t){return e*t*.02}},{key:"getWeight",value:function(){return.6}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.standardWorkHours=8,this.standardCommuteHours=1,this.standardWorkIntensity=3,this.standardWorkDays=5},(t=[{key:"calculateWorkIndex",value:function(e){var t=e.workStart,o=e.workEnd,n=e.commuteTime,r=e.overtimeFreq,a=e.overtimeHours,i=e.workIntensity,l=e.workDays,c=e.age,u=o-t,s=2*n/60,f=this.calculateTimeCostIndex(u,s),v=this.calculateIntensityCostIndex(i),d=this.calculateOvertimeCostIndex(r,a),m=l/this.standardWorkDays,y=this.calculateAgeFactor(c),h=(f+v+d)*y*m/10;return{workIndex:Math.max(1,Math.round(100*h)/100),timeCostIndex:Math.round(100*f)/100,intensityCostIndex:Math.round(100*v)/100,overtimeCostIndex:Math.round(100*d)/100,workDaysFactor:Math.round(100*m)/100,ageFactor:Math.round(100*y)/100,breakdown:{workHours:u,commuteHours:s,workDays:l,age:c}}}},{key:"calculateTimeCostIndex",value:function(e,t){return(e+t)/(this.standardWorkHours+this.standardCommuteHours)*30}},{key:"calculateIntensityCostIndex",value:function(e){return e/this.standardWorkIntensity*20}},{key:"calculateOvertimeCostIndex",value:function(e,t){var o=e+t;return o/Math.max(.1,o)*10}},{key:"calculateAgeFactor",value:function(e){return 1+.02*(e-25)}},{key:"getWeight",value:function(){return.25}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var v=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.standardRent=2e3,this.standardFood=1500,this.standardTransport=500},(t=[{key:"calculateCostIndex",value:function(e){var t=e.rent,o=e.food,n=e.transport,r=e.city,a=t+o+n,i=a/4e3*100,l=this.getCityCostFactor(r);return i*=l,{costIndex:Math.round(100*i)/100,totalCost:Math.round(100*a)/100,cityCostFactor:l,breakdown:{rent:Math.round(100*t)/100,food:Math.round(100*o)/100,transport:Math.round(100*n)/100},costRatio:{rentRatio:Math.round(t/a*100),foodRatio:Math.round(o/a*100),transportRatio:Math.round(n/a*100)}}}},{key:"getCityCostFactor",value:function(e){return{北京:1.2,上海:1.2,深圳:1.1,广州:1,杭州:.9,成都:.8,武汉:.8,西安:.7,其他:.6}[e]||1}},{key:"calculateCostBenefitRatio",value:function(e,t){return 0===t?0:Math.round(e/t*100)/100}},{key:"getWeight",value:function(){return.2}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experienceWeights={housingSatisfaction:.25,consumptionSatisfaction:.2,transportSatisfaction:.15,lifeAtmosphere:.2,workAtmosphere:.2}},(t=[{key:"calculateExperienceIndex",value:function(e){var t=this,o=(e.housingSatisfaction,e.consumptionSatisfaction,e.transportSatisfaction,e.lifeAtmosphere,e.workAtmosphere,this.validateExperienceData(e)),n=0;return Object.keys(this.experienceWeights).forEach(function(e){n+=o[e]*t.experienceWeights[e]}),n*=10,{experienceIndex:Math.round(100*n)/100,weightedScores:{housingSatisfaction:Math.round(10*o.housingSatisfaction*100)/100,consumptionSatisfaction:Math.round(10*o.consumptionSatisfaction*100)/100,transportSatisfaction:Math.round(10*o.transportSatisfaction*100)/100,lifeAtmosphere:Math.round(10*o.lifeAtmosphere*100)/100,workAtmosphere:Math.round(10*o.workAtmosphere*100)/100},weights:this.experienceWeights,breakdown:o}}},{key:"validateExperienceData",value:function(e){var t={};return Object.keys(e).forEach(function(o){var n=parseFloat(e[o])||5;n=Math.max(1,Math.min(10,n)),t[o]=n}),t}},{key:"getExperienceEvaluation",value:function(e){return e>=90?"极佳体验，工作生活平衡完美！":e>=80?"优秀体验，整体满意度很高！":e>=70?"良好体验，大部分方面令人满意！":e>=60?"一般体验，有提升空间！":e>=50?"较差体验，需要改善！":"很差体验，建议重新考虑！"}},{key:"getWeight",value:function(){return.2}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var k=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.incomeCalculator=new r,this.workCalculator=new c,this.costCalculator=new v,this.experienceCalculator=new h,this.init()},t=[{key:"init",value:function(){this.bindEvents(),this.initCitySelector()}},{key:"initCitySelector",value:function(){var e=this,t=document.getElementById("region"),o=document.getElementById("city");if(t&&o){var n=this.incomeCalculator.getRegions();t.innerHTML='<option value="">请选择地区</option>',n.forEach(function(e){var o=document.createElement("option");o.value=e,o.textContent=e,t.appendChild(o)}),t.addEventListener("change",function(t){var n=t.target.value;o.innerHTML='<option value="">请选择城市</option>',n&&e.incomeCalculator.getCitiesByRegion(n).forEach(function(e){var t=document.createElement("option");t.value=e,t.textContent=e,o.appendChild(t)})})}}},{key:"bindEvents",value:function(){var e=this,t=document.getElementById("calculateBtn");t&&t.addEventListener("click",function(){return e.calculateValue()});var o=document.getElementById("resetBtn");o&&o.addEventListener("click",function(){return e.resetForm()});var n=document.getElementById("showLogicBtn");n&&n.addEventListener("click",function(){return e.showCalculationLogic()})}},{key:"calculateValue",value:function(){try{var e=this.collectFormData();if(!this.validateFormData(e))return;var t=this.incomeCalculator.calculateIncomeIndex(e),o=this.workCalculator.calculateWorkIndex(e),n=this.costCalculator.calculateCostIndex(e),r=this.experienceCalculator.calculateExperienceIndex(e),a=this.calculateTotalScore({income:t.incomeIndex,work:o.workIndex,cost:n.costIndex,experience:r.experienceIndex}),i=this.getEvaluation(a.totalScore);this.displayResult({totalScore:a,evaluation:i,incomeResult:t,workResult:o,costResult:n,experienceResult:r,formData:e})}catch(e){console.error("计算过程中出现错误:",e),alert("计算过程中出现错误，请检查输入数据！")}}},{key:"collectFormData",value:function(){var e,t,o,n,r,a,i,l,c,u,s,f,v,d,m,y,h,p,g,b,k,w,I,S,E,x,F,C={};return C.name=(null===(e=document.getElementById("name"))||void 0===e?void 0:e.value)||"匿名用户",C.region=(null===(t=document.getElementById("region"))||void 0===t?void 0:t.value)||"",C.city=(null===(o=document.getElementById("city"))||void 0===o?void 0:o.value)||"其他",C.age=parseFloat(null===(n=document.getElementById("age"))||void 0===n?void 0:n.value)||25,C.education=(null===(r=document.getElementById("education"))||void 0===r?void 0:r.value)||"本科",C.schoolRank=(null===(a=document.getElementById("schoolRank"))||void 0===a?void 0:a.value)||"普通院校",C.salary=parseFloat(null===(i=document.getElementById("salary"))||void 0===i?void 0:i.value)||0,C.afterTax=parseFloat(null===(l=document.getElementById("afterTax"))||void 0===l?void 0:l.value)||0,C.allowance=parseFloat(null===(c=document.getElementById("allowance"))||void 0===c?void 0:c.value)||0,C.insuranceBase=parseFloat(null===(u=document.getElementById("insuranceBase"))||void 0===u?void 0:u.value)||0,C.fundRate=parseFloat(null===(s=document.getElementById("fundRate"))||void 0===s?void 0:s.value)||.12,C.otherBenefits=parseFloat(null===(f=document.getElementById("otherBenefits"))||void 0===f?void 0:f.value)||0,C.workStart=parseFloat(null===(v=document.getElementById("workStart"))||void 0===v?void 0:v.value)||9,C.workEnd=parseFloat(null===(d=document.getElementById("workEnd"))||void 0===d?void 0:d.value)||18,C.commuteTime=parseFloat(null===(m=document.getElementById("commuteTime"))||void 0===m?void 0:m.value)||60,C.overtimeFreq=parseFloat(null===(y=document.getElementById("overtimeFreq"))||void 0===y?void 0:y.value)||0,C.overtimeHours=parseFloat(null===(h=document.getElementById("overtimeHours"))||void 0===h?void 0:h.value)||0,C.workIntensity=parseFloat(null===(p=document.getElementById("workIntensity"))||void 0===p?void 0:p.value)||3,C.workDays=parseFloat(null===(g=document.getElementById("workDays"))||void 0===g?void 0:g.value)||5,C.rent=parseFloat(null===(b=document.getElementById("rent"))||void 0===b?void 0:b.value)||0,C.food=parseFloat(null===(k=document.getElementById("food"))||void 0===k?void 0:k.value)||0,C.transport=parseFloat(null===(w=document.getElementById("transport"))||void 0===w?void 0:w.value)||0,C.housingSatisfaction=parseFloat(null===(I=document.getElementById("housingSatisfaction"))||void 0===I?void 0:I.value)||5,C.consumptionSatisfaction=parseFloat(null===(S=document.getElementById("consumptionSatisfaction"))||void 0===S?void 0:S.value)||5,C.transportSatisfaction=parseFloat(null===(E=document.getElementById("transportSatisfaction"))||void 0===E?void 0:E.value)||5,C.lifeAtmosphere=parseFloat(null===(x=document.getElementById("lifeAtmosphere"))||void 0===x?void 0:x.value)||5,C.workAtmosphere=parseFloat(null===(F=document.getElementById("workAtmosphere"))||void 0===F?void 0:F.value)||5,C}},{key:"validateFormData",value:function(e){return!e.afterTax||e.afterTax<=0?(alert("请输入有效的税后工资！"),!1):e.workEnd<=e.workStart?(alert("下班时间必须晚于上班时间！"),!1):!!e.city||(alert("请选择工作城市！"),!1)}},{key:"calculateTotalScore",value:function(e){var t={income:.6,work:.25,cost:.1,experience:.05},o=0;return o+=e.income*t.income,o+=(100-e.work)*t.work,o+=(100-e.cost)*t.cost,o+=e.experience*t.experience,o=Math.max(0,Math.min(100,o)),{totalScore:Math.round(100*o)/100,weights:t,breakdown:{income:e.income*t.income,work:(100-e.work)*t.work,cost:(100-e.cost)*t.cost,experience:e.experience*t.experience}}}},{key:"getEvaluation",value:function(e){return e>=95?{grade:"天菜！",comment:"太棒了，你的公司在哪？我也要入职！",emoji:"🌟",recommendation:"这份工作性价比极高，建议立即接受！"}:e>=85?{grade:"优秀！",comment:"这工作性价比简直逆天，赶紧珍惜吧！",emoji:"✨",recommendation:"工作性价比很高，值得长期发展！"}:e>=75?{grade:"良好！",comment:"这份工作相当不错，值得考虑！",emoji:"👍",recommendation:"性价比不错，可以考虑接受这份工作！"}:e>=65?{grade:"一般！",comment:"还可以接受，但还有提升空间。",emoji:"😐",recommendation:"性价比一般，建议再看看其他机会！"}:e>=50?{grade:"及格！",comment:"勉强可以接受，但需要慎重考虑。",emoji:"😕",recommendation:"性价比偏低，除非特别需要这份工作，否则建议继续寻找！"}:{grade:"不及格！",comment:"这份工作性价比太低，不建议接受这份工作，继续寻找更好的机会吧！",emoji:"❌",recommendation:"性价比太低，不建议接受这份工作，继续寻找更好的机会吧！"}}},{key:"displayResult",value:function(e){this.updateResultPage(e),this.showResultModal(e)}},{key:"updateResultPage",value:function(e){console.log("计算结果:",e)}},{key:"showResultModal",value:function(e){console.log("显示结果弹窗:",e)}},{key:"resetForm",value:function(){var e=document.getElementById("calculatorForm");e&&e.reset(),e.querySelectorAll("input, select").forEach(function(e){"number"===e.type?e.value=e.defaultValue||"":"select-one"===e.type&&(e.selectedIndex=0)}),this.initCitySelector()}},{key:"showCalculationLogic",value:function(){window.location.href="calculation-logic.html"}}],t&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListener("DOMContentLoaded",function(){new k})})();